<html>
<head>
	<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    #main {
      /*position: absolute;*/
      /*margin: auto;*/
      width: 100%;
    }
    #dataDiv {
      width: 1000px;
      height: 997px;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <div id="main">
    <div id="dataDiv"></div>
  </div>
  <script>
    var url  = 'https://s3-us-west-2.amazonaws.com/s3arch-dev/out.csv';

    Plotly.d3.csv(url, function(err, rows){
      function unpack(rows, key){
        return rows.map(function(row){ return row[key]; });
      }

      var data = [{
        x: unpack(rows, 'age'),
        y: unpack(rows, 'income'),
        z: unpack(rows, 'rent'),
        mode: 'markers',
        type: 'scatter3d',
        marker: {
          color: 'rgb(23, 190, 207)',
          size: 2
        }
      }];

      var layout = {
        autosize: true,
        height: 1000,
        scene: {
          aspectratio: {
            x:1,
            y:1,
            z:1
          },
          camera: {
            center: {
              x:0,
              y:0,
              z:0
            },
            eye: {
              x:1.25,
              y:1.25,
              z:1.25
            },
            up: {
              x:0,
              y:0,
              z:1
            }
          },
          xaxis: {
            title: 'Age (Years)',
            type: 'linear',
            zeroline: false
          },
          yaxis: {
            title: 'Income ($)',
            type: 'linear',
            zeroline: false
          },
          zaxis: {
            title: 'Renters (%)',
            type: 'linear',
            zeroline: false
          }
        },
        title: 'Clustering Oregon Block-Group Attributes',
        width: 997
      };
      Plotly.newPlot('dataDiv', data, layout, {displayModeBar: false});
    });

  </script>
</body>
</html>
